<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>12 factor app (15 factor app) | minjun's memory</title><meta name=keywords content="SaSS,MSA"><meta name=description content="Introduction 12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.
개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다. 애플리케이션의 수평적 확장이 용이하도록 합니다. 애플리케이션 확장 가능성 CI/CD에 용이성 플랫폼간 이식성 기본적인 기대치, 정책 설정 1. Codebase 형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다. 하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.
코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.
2. Dependencies 의존성을 명시적으로 선언하고 분리한다."><meta name=author content="조민준"><link rel=canonical href=https://jo-minjun.github.io/notes/12-factor-app/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jo-minjun.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jo-minjun.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jo-minjun.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jo-minjun.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jo-minjun.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZW1ZBXB1FD"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZW1ZBXB1FD",{anonymize_ip:!1})}</script><meta property="og:title" content="12 factor app (15 factor app)"><meta property="og:description" content="Introduction 12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.
개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다. 애플리케이션의 수평적 확장이 용이하도록 합니다. 애플리케이션 확장 가능성 CI/CD에 용이성 플랫폼간 이식성 기본적인 기대치, 정책 설정 1. Codebase 형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다. 하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.
코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.
2. Dependencies 의존성을 명시적으로 선언하고 분리한다."><meta property="og:type" content="article"><meta property="og:url" content="https://jo-minjun.github.io/notes/12-factor-app/"><meta property="article:section" content="notes"><meta property="article:published_time" content="2023-02-24T00:02:51+09:00"><meta property="article:modified_time" content="2023-02-24T00:02:51+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="12 factor app (15 factor app)"><meta name=twitter:description content="Introduction 12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.
개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다. 애플리케이션의 수평적 확장이 용이하도록 합니다. 애플리케이션 확장 가능성 CI/CD에 용이성 플랫폼간 이식성 기본적인 기대치, 정책 설정 1. Codebase 형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다. 하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.
코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.
2. Dependencies 의존성을 명시적으로 선언하고 분리한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Notes","item":"https://jo-minjun.github.io/notes/"},{"@type":"ListItem","position":3,"name":"12 factor app (15 factor app)","item":"https://jo-minjun.github.io/notes/12-factor-app/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"12 factor app (15 factor app)","name":"12 factor app (15 factor app)","description":"Introduction 12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.\n개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다. 애플리케이션의 수평적 확장이 용이하도록 합니다. 애플리케이션 확장 가능성 CI/CD에 용이성 플랫폼간 이식성 기본적인 기대치, 정책 설정 1. Codebase 형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다. 하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.\n코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.\n2. Dependencies 의존성을 명시적으로 선언하고 분리한다.","keywords":["SaSS","MSA"],"articleBody":"Introduction 12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.\n개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다. 애플리케이션의 수평적 확장이 용이하도록 합니다. 애플리케이션 확장 가능성 CI/CD에 용이성 플랫폼간 이식성 기본적인 기대치, 정책 설정 1. Codebase 형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다. 하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.\n코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.\n2. Dependencies 의존성을 명시적으로 선언하고 분리한다. 의존성은 명시적으로 선언되어, 신규 개발자 또는 시스템 설정을 편리하게 해야합니다.\n대부분의 프로그래밍 언어는 패키징 시스템을 제공하기 때문에 새로 설정을 해야할 때는 언어와 패키지 매니저만 설치하면 됩니다.\n3. Config 설정값을 환경에 저장한다. 애플리케이션 설정값은 배포 환경에 따라 달라지는 값들입니다.\n데이터베이스 또는 Backing 서비스를 처리하는 리소스 Amazon S3 또는 트위터와 같은 외부 서비스에 대한 인증 정보 배포 환경 호스트 이름과 같은 값 4. Backing services Backing service Backing 서비스는 데이터베이스와, 메시징, 메일 서비스 등 통해 연결된 모든 서비스입니다.\n12 factor app은 Backing 서비스를 모두 리소스로 취급하고, 설정에서 값을 읽어서 처리하여 느슨하게 연결합니다.\n5. Build, release, run 빌드와 실행 단계를 엄격하게 구분한다. 코드베이스는 3단계를 거쳐 배포되고, 엄격하게 구분되어야 합니다.\nBuild: 지정된 코드 버전을 사용하여 의존성을 가져오고 컴파일합니다. Release: 컴파일된 결과물과 현재 배포 환경의 설정을 연결합니다. Release 단계의 결과물은 즉시 실행될 수 있습니다. Run: 애플리케이션을 실행합니다. 코드 변경은 반드시 빌드 단계에서만 이루어져야만 하며 만들어진 Release 결과는 변경될 수 없고, 이전 버전으로 롤백이 가능해야합니다.\n6. Processes 애플리케이션을 하나 이상의 Stateless 프로세스로 실행한다. 애플리케이션은 실행 환경에서 하나 이상의 프로세스로 실행됩니다.\n상태는 데이터베이스와 같은 상태 저장 서비스에 저장해야 하며, 애플리케이션은 Stateless하게 유지해야 합니다.\n7. Port binding 포트 바인딩을 통해 서비스 제공을 한다. 애플리케이션은 포트를 바인딩하여 서비스를 제공해야 합니다.\n포트를 통해 서비스를 제공함으로써 다른 애플리케이션의 Backing 서비스가 될 수 있습니다.\n8. Concurrency 프로세스 모델을 통해 수평적 확장을 한다. 애플리케이션은 리소스 추가를 통한 수직 확장 뿐만 아니라, 수를 늘리는 수평적 확장이 가능해야 합니다.\nProcesses를 준수함으로써 확장하거나 축소할 수 있습니다. 9. Disposability 빠른 시작과 그레이스풀 셧다운으로 안정성을 최대화한다. 배포와 수평 확장시 빠른 애플리케이션 구동을 위해 필요합니다.\n종료 시그널을 받은 애플리케이션은 새로운 요청을 받지 않고, 기존 요청을 처리한 후 안정적으로 종료되어야 합니다.\n10. Dev/prod parity 개발, 스테이징, 상용 환경을 최대한 비슷하게 유지한다. Local에서는 H2 database를 사용하고 상용에서는 MySQL을 사용하는 것과 같은 차이를 줄이는 것입니다.\n12 factor app은 개발과 상용 환경 사이의 차이를 줄여 지속적인 배포가 가능하도록 해야합니다.\n11. Logs 로그를 이벤트 스트림으로 처리한다. 애플리케이션은 로그에 관여하면 안되며, 단순히 버퍼링없이 출력할 뿐입니다.\n애플리케이션은 언제든지 생성되고 삭제될 수 있습니다. 따라서 이벤트는 별도 저장소에 보관되는 것이 좋습니다.\n12. Admin processes 어드민/관리 작업을 일회성 프로세스로 실행해야 한다. 개발자는 종종 일회성으로 애플리케이션 관리 작업을 수행해야 하며, 작업을 스크립트화하여 한번에 실행할 수 있도록 해야합니다.\n데이터베이스 마이그레이션 일회성 스크립트 실행 관리 스크립트는 애플리케이션과 같은 코드베이스에서 같은 설정 값을 사용해야 합니다.\n케빈 허프만이 “Beyond the 12 factor app”을 통해 MSA 환경에 적합한 3가지 요소를 제시했다.\n13. API first API 스펙 정의를 우선으로 한다. API 스펙을 먼저 정의하여 어떤 스키마로 통신할지 결정해야 합니다.\nAPI first를 통해 클라이언트와 서버가 동시에 작업을 진행할 수 있습니다.\n14. Telemetry 애플리케이션 및 리소스를 모니터링한다. 애플리케이션 및 CPU, RAM등 리소스를 모니터링하여 성능, 이벤트 및 헬스 체크 등을 확인할 수 있습니다.\n서비스 관리 및 경고 알람 트리거 설정에 도움을 줍니다.\n15. Security 보안 정책이 적절한지 확인한다. API, DB 등 보안 정책이 적절한지 확인해야 합니다.\nAPI는 OAuth 등으로 보호되어야 하며 HTTPS를 이용해서 노출시켜야 합니다.\n","wordCount":"527","inLanguage":"en","datePublished":"2023-02-24T00:02:51+09:00","dateModified":"2023-02-24T00:02:51+09:00","author":[{"@type":"Person","name":"조민준"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://jo-minjun.github.io/notes/12-factor-app/"},"publisher":{"@type":"Organization","name":"minjun's memory","logo":{"@type":"ImageObject","url":"https://jo-minjun.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jo-minjun.github.io accesskey=h title="minjun's memory (Alt + H)">minjun's memory</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jo-minjun.github.io/search title=" (Alt + /)" accesskey=/><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="23" y1="23" x2="16.65" y2="16.65"/></svg></span></a></li><li><a href=https://jo-minjun.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://jo-minjun.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jo-minjun.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://jo-minjun.github.io/notes/ title=Notes><span>Notes</span></a></li><li><a href=https://jo-minjun.github.io/doodles/ title=끄적끄적><span>끄적끄적</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jo-minjun.github.io>Home</a>&nbsp;»&nbsp;<a href=https://jo-minjun.github.io/notes/>Notes</a></div><h1 class=post-title>12 factor app (15 factor app)</h1><div class=post-meta><span title='2023-02-24 00:02:51 +0900 +0900'>February 24, 2023</span>&nbsp;·&nbsp;조민준&nbsp;|&nbsp;<a href=https://github.com/jo-minjun/my-blog/issues/new rel="noopener noreferrer" target=_blank>변경 요청 &lt;-- 내용이 잘못되었다면?</a></div></header><br><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>목차 보기</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#1-codebase aria-label="1. Codebase">1. Codebase</a><ul><li><a href=#%ed%98%95%ec%83%81%ea%b4%80%eb%a6%ac-%ec%8b%9c%ec%8a%a4%ed%85%9c%ec%97%90%ec%84%9c-%ed%95%98%eb%82%98%ec%9d%98-%ec%bd%94%eb%93%9c%eb%b2%a0%ec%9d%b4%ec%8a%a4%eb%a5%bc-%ea%b4%80%eb%a6%ac%ed%95%98%eb%a9%b4%ec%84%9c-%eb%8b%a4%ec%88%98%ec%97%90-%eb%b0%b0%ed%8f%ac%ed%95%9c%eb%8b%a4 aria-label="형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다.">형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다.</a></li></ul></li><li><a href=#2-dependencies aria-label="2. Dependencies">2. Dependencies</a><ul><li><a href=#%ec%9d%98%ec%a1%b4%ec%84%b1%ec%9d%84-%eb%aa%85%ec%8b%9c%ec%a0%81%ec%9c%bc%eb%a1%9c-%ec%84%a0%ec%96%b8%ed%95%98%ea%b3%a0-%eb%b6%84%eb%a6%ac%ed%95%9c%eb%8b%a4 aria-label="의존성을 명시적으로 선언하고 분리한다.">의존성을 명시적으로 선언하고 분리한다.</a></li></ul></li><li><a href=#3-config aria-label="3. Config">3. Config</a><ul><li><a href=#%ec%84%a4%ec%a0%95%ea%b0%92%ec%9d%84-%ed%99%98%ea%b2%bd%ec%97%90-%ec%a0%80%ec%9e%a5%ed%95%9c%eb%8b%a4 aria-label="설정값을 환경에 저장한다.">설정값을 환경에 저장한다.</a></li></ul></li><li><a href=#4-backing-services aria-label="4. Backing services">4. Backing services</a><ul><li><a href=#backing-service aria-label="Backing service">Backing service</a></li></ul></li><li><a href=#5-build-release-run aria-label="5. Build, release, run">5. Build, release, run</a><ul><li><a href=#%eb%b9%8c%eb%93%9c%ec%99%80-%ec%8b%a4%ed%96%89-%eb%8b%a8%ea%b3%84%eb%a5%bc-%ec%97%84%ea%b2%a9%ed%95%98%ea%b2%8c-%ea%b5%ac%eb%b6%84%ed%95%9c%eb%8b%a4 aria-label="빌드와 실행 단계를 엄격하게 구분한다.">빌드와 실행 단계를 엄격하게 구분한다.</a></li></ul></li><li><a href=#6-processes aria-label="6. Processes">6. Processes</a><ul><li><a href=#%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%ec%9d%84-%ed%95%98%eb%82%98-%ec%9d%b4%ec%83%81%ec%9d%98-stateless-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4%eb%a1%9c-%ec%8b%a4%ed%96%89%ed%95%9c%eb%8b%a4 aria-label="애플리케이션을 하나 이상의 Stateless 프로세스로 실행한다.">애플리케이션을 하나 이상의 Stateless 프로세스로 실행한다.</a></li></ul></li><li><a href=#7-port-binding aria-label="7. Port binding">7. Port binding</a><ul><li><a href=#%ed%8f%ac%ed%8a%b8-%eb%b0%94%ec%9d%b8%eb%94%a9%ec%9d%84-%ed%86%b5%ed%95%b4-%ec%84%9c%eb%b9%84%ec%8a%a4-%ec%a0%9c%ea%b3%b5%ec%9d%84-%ed%95%9c%eb%8b%a4 aria-label="포트 바인딩을 통해 서비스 제공을 한다.">포트 바인딩을 통해 서비스 제공을 한다.</a></li></ul></li><li><a href=#8-concurrency aria-label="8. Concurrency">8. Concurrency</a><ul><li><a href=#%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4-%eb%aa%a8%eb%8d%b8%ec%9d%84-%ed%86%b5%ed%95%b4-%ec%88%98%ed%8f%89%ec%a0%81-%ed%99%95%ec%9e%a5%ec%9d%84-%ed%95%9c%eb%8b%a4 aria-label="프로세스 모델을 통해 수평적 확장을 한다.">프로세스 모델을 통해 수평적 확장을 한다.</a></li></ul></li><li><a href=#9-disposability aria-label="9. Disposability">9. Disposability</a><ul><li><a href=#%eb%b9%a0%eb%a5%b8-%ec%8b%9c%ec%9e%91%ea%b3%bc-%ea%b7%b8%eb%a0%88%ec%9d%b4%ec%8a%a4%ed%92%80-%ec%85%a7%eb%8b%a4%ec%9a%b4%ec%9c%bc%eb%a1%9c-%ec%95%88%ec%a0%95%ec%84%b1%ec%9d%84-%ec%b5%9c%eb%8c%80%ed%99%94%ed%95%9c%eb%8b%a4 aria-label="빠른 시작과 그레이스풀 셧다운으로 안정성을 최대화한다.">빠른 시작과 그레이스풀 셧다운으로 안정성을 최대화한다.</a></li></ul></li><li><a href=#10-devprod-parity aria-label="10. Dev/prod parity">10. Dev/prod parity</a><ul><li><a href=#%ea%b0%9c%eb%b0%9c-%ec%8a%a4%ed%85%8c%ec%9d%b4%ec%a7%95-%ec%83%81%ec%9a%a9-%ed%99%98%ea%b2%bd%ec%9d%84-%ec%b5%9c%eb%8c%80%ed%95%9c-%eb%b9%84%ec%8a%b7%ed%95%98%ea%b2%8c-%ec%9c%a0%ec%a7%80%ed%95%9c%eb%8b%a4 aria-label="개발, 스테이징, 상용 환경을 최대한 비슷하게 유지한다.">개발, 스테이징, 상용 환경을 최대한 비슷하게 유지한다.</a></li></ul></li><li><a href=#11-logs aria-label="11. Logs">11. Logs</a><ul><li><a href=#%eb%a1%9c%ea%b7%b8%eb%a5%bc-%ec%9d%b4%eb%b2%a4%ed%8a%b8-%ec%8a%a4%ed%8a%b8%eb%a6%bc%ec%9c%bc%eb%a1%9c-%ec%b2%98%eb%a6%ac%ed%95%9c%eb%8b%a4 aria-label="로그를 이벤트 스트림으로 처리한다.">로그를 이벤트 스트림으로 처리한다.</a></li></ul></li><li><a href=#12-admin-processes aria-label="12. Admin processes">12. Admin processes</a><ul><li><a href=#%ec%96%b4%eb%93%9c%eb%af%bc%ea%b4%80%eb%a6%ac-%ec%9e%91%ec%97%85%ec%9d%84-%ec%9d%bc%ed%9a%8c%ec%84%b1-%ed%94%84%eb%a1%9c%ec%84%b8%ec%8a%a4%eb%a1%9c-%ec%8b%a4%ed%96%89%ed%95%b4%ec%95%bc-%ed%95%9c%eb%8b%a4 aria-label="어드민/관리 작업을 일회성 프로세스로 실행해야 한다.">어드민/관리 작업을 일회성 프로세스로 실행해야 한다.</a></li></ul></li><li><a href=#13-api-first aria-label="13. API first">13. API first</a><ul><li><a href=#api-%ec%8a%a4%ed%8e%99-%ec%a0%95%ec%9d%98%eb%a5%bc-%ec%9a%b0%ec%84%a0%ec%9c%bc%eb%a1%9c-%ed%95%9c%eb%8b%a4 aria-label="API 스펙 정의를 우선으로 한다.">API 스펙 정의를 우선으로 한다.</a></li></ul></li><li><a href=#14-telemetry aria-label="14. Telemetry">14. Telemetry</a><ul><li><a href=#%ec%95%a0%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98-%eb%b0%8f-%eb%a6%ac%ec%86%8c%ec%8a%a4%eb%a5%bc-%eb%aa%a8%eb%8b%88%ed%84%b0%eb%a7%81%ed%95%9c%eb%8b%a4 aria-label="애플리케이션 및 리소스를 모니터링한다.">애플리케이션 및 리소스를 모니터링한다.</a></li></ul></li><li><a href=#15-security aria-label="15. Security">15. Security</a><ul><li><a href=#%eb%b3%b4%ec%95%88-%ec%a0%95%ec%b1%85%ec%9d%b4-%ec%a0%81%ec%a0%88%ed%95%9c%ec%a7%80-%ed%99%95%ec%9d%b8%ed%95%9c%eb%8b%a4 aria-label="보안 정책이 적절한지 확인한다.">보안 정책이 적절한지 확인한다.</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>12 factor app은 서비스형 소프트웨어를 구성하기 위한 방법론입니다.</p><ul><li>개발 언어/프레임워크에 상관없는 이식성과 플랫폼 호환성 향상을 위한 디자인 원칙입니다.</li><li>애플리케이션의 수평적 확장이 용이하도록 합니다.</li></ul><blockquote><ul><li>애플리케이션 확장 가능성</li><li>CI/CD에 용이성</li><li>플랫폼간 이식성</li><li>기본적인 기대치, 정책 설정</li></ul></blockquote><h2 id=1-codebase>1. Codebase<a hidden class=anchor aria-hidden=true href=#1-codebase>#</a></h2><h3 id=형상관리-시스템에서-하나의-코드베이스를-관리하면서-다수에-배포한다>형상관리 시스템에서 하나의 코드베이스를 관리하면서, 다수에 배포한다.<a hidden class=anchor aria-hidden=true href=#형상관리-시스템에서-하나의-코드베이스를-관리하면서-다수에-배포한다>#</a></h3><p>하나의 코드베이스에 여러개의 애플리케이션 코드가 있다면 12 factor app 위반입니다.</p><p>코드베이스는 모든 배포에 사용되지만 각 배포는 다른 버전이 사용될 수 있습니다.</p><p><img loading=lazy src=/images/notes/12-factor-app/codebase.png alt=codebase></p><h2 id=2-dependencies>2. Dependencies<a hidden class=anchor aria-hidden=true href=#2-dependencies>#</a></h2><h3 id=의존성을-명시적으로-선언하고-분리한다>의존성을 명시적으로 선언하고 분리한다.<a hidden class=anchor aria-hidden=true href=#의존성을-명시적으로-선언하고-분리한다>#</a></h3><p>의존성은 명시적으로 선언되어, 신규 개발자 또는 시스템 설정을 편리하게 해야합니다.</p><p>대부분의 프로그래밍 언어는 패키징 시스템을 제공하기 때문에 새로 설정을 해야할 때는 언어와 패키지 매니저만 설치하면 됩니다.</p><p><img loading=lazy src=/images/notes/12-factor-app/dependencies.png alt=dependencies></p><h2 id=3-config>3. Config<a hidden class=anchor aria-hidden=true href=#3-config>#</a></h2><h3 id=설정값을-환경에-저장한다>설정값을 환경에 저장한다.<a hidden class=anchor aria-hidden=true href=#설정값을-환경에-저장한다>#</a></h3><p>애플리케이션 설정값은 배포 환경에 따라 달라지는 값들입니다.</p><ul><li>데이터베이스 또는 Backing 서비스를 처리하는 리소스</li><li>Amazon S3 또는 트위터와 같은 외부 서비스에 대한 인증 정보</li><li>배포 환경 호스트 이름과 같은 값</li></ul><p><img loading=lazy src=/images/notes/12-factor-app/config.png alt=config></p><h2 id=4-backing-services>4. Backing services<a hidden class=anchor aria-hidden=true href=#4-backing-services>#</a></h2><h3 id=backing-service>Backing service<a hidden class=anchor aria-hidden=true href=#backing-service>#</a></h3><p>Backing 서비스는 데이터베이스와, 메시징, 메일 서비스 등 통해 연결된 모든 서비스입니다.</p><p>12 factor app은 Backing 서비스를 모두 리소스로 취급하고, 설정에서 값을 읽어서 처리하여 느슨하게 연결합니다.</p><p><img loading=lazy src=/images/notes/12-factor-app/backing-service.png alt=backing-service></p><h2 id=5-build-release-run>5. Build, release, run<a hidden class=anchor aria-hidden=true href=#5-build-release-run>#</a></h2><h3 id=빌드와-실행-단계를-엄격하게-구분한다>빌드와 실행 단계를 엄격하게 구분한다.<a hidden class=anchor aria-hidden=true href=#빌드와-실행-단계를-엄격하게-구분한다>#</a></h3><p>코드베이스는 3단계를 거쳐 배포되고, 엄격하게 구분되어야 합니다.</p><ol><li>Build: 지정된 코드 버전을 사용하여 의존성을 가져오고 컴파일합니다.</li><li>Release: 컴파일된 결과물과 현재 배포 환경의 설정을 연결합니다. Release 단계의 결과물은 즉시 실행될 수 있습니다.</li><li>Run: 애플리케이션을 실행합니다.</li></ol><p>코드 변경은 반드시 빌드 단계에서만 이루어져야만 하며 만들어진 Release 결과는 변경될 수 없고, 이전 버전으로 롤백이 가능해야합니다.</p><h2 id=6-processes>6. Processes<a hidden class=anchor aria-hidden=true href=#6-processes>#</a></h2><h3 id=애플리케이션을-하나-이상의-stateless-프로세스로-실행한다>애플리케이션을 하나 이상의 Stateless 프로세스로 실행한다.<a hidden class=anchor aria-hidden=true href=#애플리케이션을-하나-이상의-stateless-프로세스로-실행한다>#</a></h3><p>애플리케이션은 실행 환경에서 하나 이상의 프로세스로 실행됩니다.</p><p>상태는 데이터베이스와 같은 상태 저장 서비스에 저장해야 하며, 애플리케이션은 Stateless하게 유지해야 합니다.</p><p><img loading=lazy src=/images/notes/12-factor-app/processes.png alt=processes></p><h2 id=7-port-binding>7. Port binding<a hidden class=anchor aria-hidden=true href=#7-port-binding>#</a></h2><h3 id=포트-바인딩을-통해-서비스-제공을-한다>포트 바인딩을 통해 서비스 제공을 한다.<a hidden class=anchor aria-hidden=true href=#포트-바인딩을-통해-서비스-제공을-한다>#</a></h3><p>애플리케이션은 포트를 바인딩하여 서비스를 제공해야 합니다.</p><p>포트를 통해 서비스를 제공함으로써 다른 애플리케이션의 Backing 서비스가 될 수 있습니다.</p><h2 id=8-concurrency>8. Concurrency<a hidden class=anchor aria-hidden=true href=#8-concurrency>#</a></h2><h3 id=프로세스-모델을-통해-수평적-확장을-한다>프로세스 모델을 통해 수평적 확장을 한다.<a hidden class=anchor aria-hidden=true href=#프로세스-모델을-통해-수평적-확장을-한다>#</a></h3><p>애플리케이션은 리소스 추가를 통한 수직 확장 뿐만 아니라, 수를 늘리는 수평적 확장이 가능해야 합니다.</p><ol start=6><li>Processes를 준수함으로써 확장하거나 축소할 수 있습니다.</li></ol><h2 id=9-disposability>9. Disposability<a hidden class=anchor aria-hidden=true href=#9-disposability>#</a></h2><h3 id=빠른-시작과-그레이스풀-셧다운으로-안정성을-최대화한다>빠른 시작과 그레이스풀 셧다운으로 안정성을 최대화한다.<a hidden class=anchor aria-hidden=true href=#빠른-시작과-그레이스풀-셧다운으로-안정성을-최대화한다>#</a></h3><p>배포와 수평 확장시 빠른 애플리케이션 구동을 위해 필요합니다.</p><p>종료 시그널을 받은 애플리케이션은 새로운 요청을 받지 않고, 기존 요청을 처리한 후 안정적으로 종료되어야 합니다.</p><h2 id=10-devprod-parity>10. Dev/prod parity<a hidden class=anchor aria-hidden=true href=#10-devprod-parity>#</a></h2><h3 id=개발-스테이징-상용-환경을-최대한-비슷하게-유지한다>개발, 스테이징, 상용 환경을 최대한 비슷하게 유지한다.<a hidden class=anchor aria-hidden=true href=#개발-스테이징-상용-환경을-최대한-비슷하게-유지한다>#</a></h3><p>Local에서는 H2 database를 사용하고 상용에서는 MySQL을 사용하는 것과 같은 차이를 줄이는 것입니다.</p><p>12 factor app은 개발과 상용 환경 사이의 차이를 줄여 지속적인 배포가 가능하도록 해야합니다.</p><h2 id=11-logs>11. Logs<a hidden class=anchor aria-hidden=true href=#11-logs>#</a></h2><h3 id=로그를-이벤트-스트림으로-처리한다>로그를 이벤트 스트림으로 처리한다.<a hidden class=anchor aria-hidden=true href=#로그를-이벤트-스트림으로-처리한다>#</a></h3><p>애플리케이션은 로그에 관여하면 안되며, 단순히 버퍼링없이 출력할 뿐입니다.</p><p>애플리케이션은 언제든지 생성되고 삭제될 수 있습니다. 따라서 이벤트는 별도 저장소에 보관되는 것이 좋습니다.</p><p><img loading=lazy src=/images/notes/12-factor-app/logs.png alt=logs></p><h2 id=12-admin-processes>12. Admin processes<a hidden class=anchor aria-hidden=true href=#12-admin-processes>#</a></h2><h3 id=어드민관리-작업을-일회성-프로세스로-실행해야-한다>어드민/관리 작업을 일회성 프로세스로 실행해야 한다.<a hidden class=anchor aria-hidden=true href=#어드민관리-작업을-일회성-프로세스로-실행해야-한다>#</a></h3><p>개발자는 종종 일회성으로 애플리케이션 관리 작업을 수행해야 하며, 작업을 스크립트화하여 한번에 실행할 수 있도록 해야합니다.</p><ul><li>데이터베이스 마이그레이션</li><li>일회성 스크립트 실행</li></ul><p>관리 스크립트는 애플리케이션과 같은 코드베이스에서 같은 설정 값을 사용해야 합니다.</p><hr><blockquote><p>케빈 허프만이 “Beyond the 12 factor app”을 통해 MSA 환경에 적합한 3가지 요소를 제시했다.</p></blockquote><h2 id=13-api-first>13. API first<a hidden class=anchor aria-hidden=true href=#13-api-first>#</a></h2><h3 id=api-스펙-정의를-우선으로-한다>API 스펙 정의를 우선으로 한다.<a hidden class=anchor aria-hidden=true href=#api-스펙-정의를-우선으로-한다>#</a></h3><p>API 스펙을 먼저 정의하여 어떤 스키마로 통신할지 결정해야 합니다.</p><p>API first를 통해 클라이언트와 서버가 동시에 작업을 진행할 수 있습니다.</p><h2 id=14-telemetry>14. Telemetry<a hidden class=anchor aria-hidden=true href=#14-telemetry>#</a></h2><h3 id=애플리케이션-및-리소스를-모니터링한다>애플리케이션 및 리소스를 모니터링한다.<a hidden class=anchor aria-hidden=true href=#애플리케이션-및-리소스를-모니터링한다>#</a></h3><p>애플리케이션 및 CPU, RAM등 리소스를 모니터링하여 성능, 이벤트 및 헬스 체크 등을 확인할 수 있습니다.</p><p>서비스 관리 및 경고 알람 트리거 설정에 도움을 줍니다.</p><h2 id=15-security>15. Security<a hidden class=anchor aria-hidden=true href=#15-security>#</a></h2><h3 id=보안-정책이-적절한지-확인한다>보안 정책이 적절한지 확인한다.<a hidden class=anchor aria-hidden=true href=#보안-정책이-적절한지-확인한다>#</a></h3><p>API, DB 등 보안 정책이 적절한지 확인해야 합니다.</p><p>API는 OAuth 등으로 보호되어야 하며 HTTPS를 이용해서 노출시켜야 합니다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://jo-minjun.github.io/tags/sass/>SaSS</a></li><li><a href=https://jo-minjun.github.io/tags/msa/>MSA</a></li></ul><nav class=paginav><a class=next href=https://jo-minjun.github.io/notes/kubernetes-pod-service/><span class=title>Next »</span><br><span>Kubernetes: pod와 service</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on twitter" href="https://twitter.com/intent/tweet/?text=12%20factor%20app%20%2815%20factor%20app%29&amp;url=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f&amp;hashtags=SaSS%2cMSA"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f&amp;title=12%20factor%20app%20%2815%20factor%20app%29&amp;summary=12%20factor%20app%20%2815%20factor%20app%29&amp;source=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f&title=12%20factor%20app%20%2815%20factor%20app%29"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on whatsapp" href="https://api.whatsapp.com/send?text=12%20factor%20app%20%2815%20factor%20app%29%20-%20https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 12 factor app (15 factor app) on telegram" href="https://telegram.me/share/url?text=12%20factor%20app%20%2815%20factor%20app%29&amp;url=https%3a%2f%2fjo-minjun.github.io%2fnotes%2f12-factor-app%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div><script src=https://utteranc.es/client.js repo=jo-minjun/my-blog issue-term=pathname label=comment theme=photon-dark crossorigin=anonymous async></script></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://jo-minjun.github.io>minjun's memory</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>